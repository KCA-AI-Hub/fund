<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ë¶€ ì§ì›ìš© ë¯¼ì›ì²˜ë¦¬ ì±—ë´‡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chatbot-container {
            max-width: 1200px;
            width: 100%;
            height: 90vh;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chatbot-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .chatbot-avatar {
            font-size: 2.5rem;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chatbot-title h1 {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
        }

        .chatbot-title p {
            margin: 5px 0 0 0;
            opacity: 0.9;
            font-size: 0.9rem;
        }

        .chatbot-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #4ade80;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .main-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .chat-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #e5e7eb;
        }

        .result-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #f8fafc;
        }

        .chatbot-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8fafc;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
        }

        .user-message {
            justify-content: flex-end;
        }

        .bot-message {
            justify-content: flex-start;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
        }

        .user-message .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .bot-message .message-content {
            background: white;
            color: #374151;
            border: 1px solid #e5e7eb;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .message-text {
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 4px;
        }

        .message-time {
            font-size: 0.75rem;
            opacity: 0.7;
            text-align: right;
        }

        .bot-message .message-time {
            text-align: left;
        }

        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 8px 0;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: #9ca3af;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .chatbot-input {
            padding: 20px;
            background: white;
            border-top: 1px solid #e5e7eb;
        }

        .input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .input-container textarea {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 25px;
            font-size: 0.95rem;
            resize: none;
            outline: none;
            transition: border-color 0.2s;
            font-family: inherit;
        }

        .input-container textarea:focus {
            border-color: #667eea;
        }

        .input-container textarea:disabled {
            background: #f9fafb;
            color: #9ca3af;
        }

        .send-button {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .send-button:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .send-button:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }

        .generate-button {
            width: 100%;
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .generate-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }

        .generate-button:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .quick-actions button {
            padding: 8px 16px;
            border: 1px solid #e5e7eb;
            border-radius: 20px;
            background: white;
            color: #374151;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-actions button:hover {
            background: #f3f4f6;
            border-color: #d1d5db;
        }

        /* ê²°ê³¼ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .result-header {
            padding: 20px;
            background: white;
            border-bottom: 1px solid #e5e7eb;
        }

        .result-header h2 {
            font-size: 1.3rem;
            color: #374151;
            margin-bottom: 10px;
        }

        .result-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .answer-section {
            flex: 1;
            padding: 20px;
            background: white;
            border-right: 1px solid #e5e7eb;
            overflow-y: auto;
        }

        .similar-cases-section {
            flex: 1;
            padding: 20px;
            background: #f8fafc;
            overflow-y: auto;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .answer-content {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .answer-text {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #374151;
            margin-bottom: 15px;
            white-space: pre-line;
        }

        .legal-basis {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .legal-basis h4 {
            color: #0369a1;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .legal-basis ul {
            margin-left: 20px;
            color: #374151;
            font-size: 0.85rem;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-button {
            padding: 8px 16px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            background: white;
            color: #374151;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .action-button:hover {
            background: #f3f4f6;
            border-color: #d1d5db;
        }

        .copy-button {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }

        .copy-button:hover {
            background: #059669;
            border-color: #059669;
        }

        .edit-button {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .edit-button:hover {
            background: #2563eb;
            border-color: #2563eb;
        }

        .similar-case {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .similar-case:hover {
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
        }

        .case-title {
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .case-content {
            color: #6b7280;
            font-size: 0.85rem;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .case-tags {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .case-tag {
            background: #f3f4f6;
            color: #374151;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
        }

        .hidden {
            display: none !important;
        }

        .chatbot-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chatbot-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .chatbot-messages::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        .chatbot-messages::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        @media (max-width: 768px) {
            .chatbot-container {
                border-radius: 0;
                height: 100vh;
            }
            
            .main-content {
                flex-direction: column;
            }
            
            .chat-section {
                border-right: none;
                border-bottom: 1px solid #e5e7eb;
            }
            
            .result-content {
                flex-direction: column;
            }
            
            .answer-section {
                border-right: none;
                border-bottom: 1px solid #e5e7eb;
            }
            
            .chatbot-header {
                padding: 15px;
            }
            
            .chatbot-title h1 {
                font-size: 1.3rem;
            }
            
            .chatbot-avatar {
                width: 50px;
                height: 50px;
                font-size: 2rem;
            }
            
            .message-content {
                max-width: 85%;
            }
            
            .quick-actions {
                justify-content: center;
            }
            
            .quick-actions button {
                font-size: 0.8rem;
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="chatbot-container">
        <div class="chatbot-header">
            <div class="chatbot-title">
                <div class="chatbot-avatar">ğŸ¤–</div>
                <div>
                    <h1>ë‚´ë¶€ ì§ì›ìš© ë¯¼ì›ì²˜ë¦¬ ì±—ë´‡</h1>
                    <p>ë¯¼ì› ìƒë‹´ ì§€ì› ì‹œìŠ¤í…œ</p>
                </div>
            </div>
            <div class="chatbot-status">
                <span class="status-dot"></span>
                ì˜¨ë¼ì¸
            </div>
        </div>

        <div class="main-content">
            <!-- ì±„íŒ… ì„¹ì…˜ -->
            <div class="chat-section" id="chatSection">
                <div class="chatbot-messages" id="messages">
                    <!-- ë©”ì‹œì§€ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>

                <div class="chatbot-input">
                    <div class="input-container">
                        <textarea 
                            id="messageInput" 
                            placeholder="ë¯¼ì› ë‚´ìš©ì„ ì…ë ¥í•˜ê±°ë‚˜ ì§ˆë¬¸í•˜ì„¸ìš”..."
                            rows="3"
                        ></textarea>
                        <button id="sendButton" class="send-button">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22 2L11 13" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                                <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                            </svg>
                        </button>
                    </div>
                    
                    <button id="generateButton" class="generate-button">
                        ğŸ“‹ ëŒ€ë‹µ ìƒì„± ì™„ë£Œ
                    </button>
                    
                    <div class="quick-actions">
                        <button onclick="setQuickMessage('ë„ë¡œ ë³´ìˆ˜ ìš”ì²­ ë¯¼ì›ì´ ë“¤ì–´ì™”ëŠ”ë° ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼ í•˜ë‚˜ìš”?')">ë„ë¡œ ë³´ìˆ˜</button>
                        <button onclick="setQuickMessage('ê°œì¸ì •ë³´ ê´€ë ¨ ë¯¼ì›ì¸ë° ê´€ë ¨ ë²•ë ¹ì´ ìˆë‚˜ìš”?')">ê°œì¸ì •ë³´</button>
                        <button onclick="setQuickMessage('ì˜ˆì‚°ì´ ì†Œìš”ë˜ëŠ” ë¯¼ì›ì¸ë° ë³´ê³ í•´ì•¼ í•˜ë‚˜ìš”?')">ì˜ˆì‚° ë¯¼ì›</button>
                        <button onclick="setQuickMessage('ìœ ì‚¬í•œ ë¯¼ì› ì‚¬ë¡€ê°€ ìˆë‚˜ìš”?')">ìœ ì‚¬ ì‚¬ë¡€</button>
                    </div>
                </div>
            </div>

            <!-- ê²°ê³¼ ì„¹ì…˜ -->
            <div class="result-section hidden" id="resultSection">
                <div class="result-header">
                    <h2>ğŸ“‹ ë¯¼ì› ì²˜ë¦¬ ê²°ê³¼</h2>
                </div>
                
                <div class="result-content">
                    <!-- ë‹µë³€ ì„¹ì…˜ -->
                    <div class="answer-section">
                        <div class="section-title">
                            ğŸ’¬ ë‹µë³€ ë° ê·¼ê±°
                        </div>
                        
                        <div class="answer-content">
                            <div class="answer-text" id="answerText">
                                ë¯¼ì› ë‚´ìš©ì„ ì…ë ¥í•˜ê³  "ëŒ€ë‹µ ìƒì„± ì™„ë£Œ" ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.
                            </div>
                            
                            <div class="legal-basis">
                                <h4>ğŸ“š ê´€ë ¨ ë²•ë ¹ ë° ê·¼ê±°</h4>
                                <ul id="legalBasis">
                                    <li>ë¯¼ì› ë‚´ìš©ì— ë”°ë¼ ê´€ë ¨ ë²•ë ¹ì´ í‘œì‹œë©ë‹ˆë‹¤.</li>
                                </ul>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="action-button copy-button" onclick="copyAnswer()">
                                    ğŸ“‹ ë‹µë³€ ë³µì‚¬
                                </button>
                                <button class="action-button edit-button" onclick="editAnswer()">
                                    âœï¸ ë‹µë³€ ìˆ˜ì •
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ìœ ì‚¬ ì‚¬ë¡€ ì„¹ì…˜ -->
                    <div class="similar-cases-section">
                        <div class="section-title">
                            ğŸ” ìœ ì‚¬ ì‚¬ë¡€
                        </div>
                        
                        <div id="similarCases">
                            <div class="similar-case">
                                <div class="case-title">ë„ë¡œ ë³´ìˆ˜ ìš”ì²­ ë¯¼ì›</div>
                                <div class="case-content">
                                    ì‹œë¯¼ì´ ë„ë¡œ íŒŒì†ìœ¼ë¡œ ì¸í•œ ë³´ìˆ˜ ìš”ì²­ ë¯¼ì›ì„ ì œê¸°í•œ ì‚¬ë¡€ì…ë‹ˆë‹¤. 
                                    ë„ë¡œê´€ë¦¬ê³¼ì™€ í˜‘ì˜í•˜ì—¬ 2ì£¼ ë‚´ ë³´ìˆ˜ ì™„ë£Œ í›„ ë¯¼ì›ì¸ì—ê²Œ ë‹µë³€í–ˆìŠµë‹ˆë‹¤.
                                </div>
                                <div class="case-tags">
                                    <span class="case-tag">ë„ë¡œ</span>
                                    <span class="case-tag">ë³´ìˆ˜</span>
                                    <span class="case-tag">2ì£¼</span>
                                </div>
                            </div>
                            
                            <div class="similar-case">
                                <div class="case-title">ê°œì¸ì •ë³´ ë³´í˜¸ ë¯¼ì›</div>
                                <div class="case-content">
                                    ê°œì¸ì •ë³´ ìœ ì¶œ ì˜ì‹¬ ë¯¼ì›ì— ëŒ€í•´ ê°œì¸ì •ë³´ë³´í˜¸ë²•ì— ê·¼ê±°í•˜ì—¬ 
                                    ì¡°ì‚¬ í›„ ê²°ê³¼ë¥¼ í†µë³´í•œ ì‚¬ë¡€ì…ë‹ˆë‹¤.
                                </div>
                                <div class="case-tags">
                                    <span class="case-tag">ê°œì¸ì •ë³´</span>
                                    <span class="case-tag">ë³´í˜¸ë²•</span>
                                    <span class="case-tag">ì¡°ì‚¬</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ë‚´ë¶€ ì§ì›ìš© ë¯¼ì›ì²˜ë¦¬ ì±—ë´‡ ì‘ë‹µ ë°ì´í„°
        const mockResponses = {
            'ë„ë¡œ': {
                answer: 'ë„ë¡œ ë³´ìˆ˜ ìš”ì²­ ë¯¼ì› ì²˜ë¦¬ ì ˆì°¨:\n\n1. ë¯¼ì› ë‚´ìš© í™•ì¸ ë° í˜„ì¥ ì¡°ì‚¬\n2. ë„ë¡œê´€ë¦¬ê³¼ì™€ í˜‘ì˜\n3. ë³´ìˆ˜ ì¼ì • ìˆ˜ë¦½ (ì¼ë°˜ì ìœ¼ë¡œ 2ì£¼ ì´ë‚´)\n4. ë¯¼ì›ì¸ì—ê²Œ ì²˜ë¦¬ ì¼ì • ì•ˆë‚´\n5. ë³´ìˆ˜ ì™„ë£Œ í›„ ê²°ê³¼ í†µë³´',
                legalBasis: [
                    'ë„ë¡œë²• ì œ2ì¡° (ë„ë¡œì˜ ì •ì˜)',
                    'ë„ë¡œë²• ì œ19ì¡° (ë„ë¡œì˜ ê´€ë¦¬)',
                    'ë¯¼ì›ì²˜ë¦¬ì— ê´€í•œ ë²•ë¥  ì œ8ì¡° (ì²˜ë¦¬ê¸°ê°„)'
                ],
                similarCases: [
                    {
                        title: 'ë„ë¡œ íŒŒì† ë³´ìˆ˜ ìš”ì²­',
                        content: 'ì‹œë¯¼ì´ ë„ë¡œ íŒŒì†ìœ¼ë¡œ ì¸í•œ ë³´ìˆ˜ ìš”ì²­ ë¯¼ì›ì„ ì œê¸°í•œ ì‚¬ë¡€ì…ë‹ˆë‹¤. ë„ë¡œê´€ë¦¬ê³¼ì™€ í˜‘ì˜í•˜ì—¬ 2ì£¼ ë‚´ ë³´ìˆ˜ ì™„ë£Œ í›„ ë¯¼ì›ì¸ì—ê²Œ ë‹µë³€í–ˆìŠµë‹ˆë‹¤.',
                        tags: ['ë„ë¡œ', 'ë³´ìˆ˜', '2ì£¼']
                    },
                    {
                        title: 'ë„ë¡œ í™•ì¥ ê³µì‚¬ ë¯¼ì›',
                        content: 'ë„ë¡œ í™•ì¥ ê³µì‚¬ë¡œ ì¸í•œ ì†ŒìŒ ë¯¼ì›ì— ëŒ€í•´ ê³µì‚¬ ì¼ì • ì¡°ì • ë° ë°©ìŒ ì‹œì„¤ ì„¤ì¹˜ë¡œ í•´ê²°í•œ ì‚¬ë¡€ì…ë‹ˆë‹¤.',
                        tags: ['ë„ë¡œ', 'ê³µì‚¬', 'ì†ŒìŒ']
                    }
                ]
            },
            'ê°œì¸ì •ë³´': {
                answer: 'ê°œì¸ì •ë³´ ê´€ë ¨ ë¯¼ì› ì²˜ë¦¬ ì ˆì°¨:\n\n1. ë¯¼ì› ë‚´ìš© ê²€í†  ë° ê°œì¸ì •ë³´ë³´í˜¸ë²• ì ìš© ê²€í† \n2. ê°œì¸ì •ë³´ë³´í˜¸ìœ„ì›íšŒ í˜‘ì˜ (í•„ìš”ì‹œ)\n3. ê´€ë ¨ ë¶€ì„œ ì¡°ì‚¬ ë° ê°œì„  ì¡°ì¹˜\n4. ë¯¼ì›ì¸ì—ê²Œ ì²˜ë¦¬ ê²°ê³¼ í†µë³´\n5. ì¬ë°œ ë°©ì§€ ëŒ€ì±… ìˆ˜ë¦½',
                legalBasis: [
                    'ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ1ì¡° (ëª©ì )',
                    'ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ15ì¡° (ê°œì¸ì •ë³´ì˜ ìˆ˜ì§‘Â·ì´ìš©)',
                    'ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ17ì¡° (ê°œì¸ì •ë³´ì˜ ì œ3ì ì œê³µ)',
                    'ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ71ì¡° (ë¯¼ì›ì²˜ë¦¬)'
                ],
                similarCases: [
                    {
                        title: 'ê°œì¸ì •ë³´ ìœ ì¶œ ì˜ì‹¬',
                        content: 'ê°œì¸ì •ë³´ ìœ ì¶œ ì˜ì‹¬ ë¯¼ì›ì— ëŒ€í•´ ê°œì¸ì •ë³´ë³´í˜¸ë²•ì— ê·¼ê±°í•˜ì—¬ ì¡°ì‚¬ í›„ ê²°ê³¼ë¥¼ í†µë³´í•œ ì‚¬ë¡€ì…ë‹ˆë‹¤.',
                        tags: ['ê°œì¸ì •ë³´', 'ë³´í˜¸ë²•', 'ì¡°ì‚¬']
                    },
                    {
                        title: 'ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë™ì˜',
                        content: 'ê°œì¸ì •ë³´ ìˆ˜ì§‘ì— ëŒ€í•œ ë™ì˜ ì² íšŒ ìš”ì²­ ë¯¼ì›ì„ ì²˜ë¦¬í•œ ì‚¬ë¡€ì…ë‹ˆë‹¤.',
                        tags: ['ê°œì¸ì •ë³´', 'ë™ì˜', 'ì² íšŒ']
                    }
                ]
            },
            'ì˜ˆì‚°': {
                answer: 'ì˜ˆì‚° ì†Œìš” ë¯¼ì› ì²˜ë¦¬ ì ˆì°¨:\n\n1. ì˜ˆì‚° ì†Œìš” ê¸ˆì•¡ ì‚°ì •\n2. ì˜ˆì‚° í™•ë³´ ë°©ì•ˆ ê²€í† \n3. ê´€ë ¨ ë¶€ì„œ í˜‘ì˜ ë° ì˜ˆì‚° ë°°ì • ì‹ ì²­\n4. ìƒê¸‰ì ë³´ê³  ë° ìŠ¹ì¸\n5. ì²˜ë¦¬ ì¼ì • ì¡°ì • ë° ë¯¼ì›ì¸ ì•ˆë‚´',
                legalBasis: [
                    'ì§€ë°©ì¬ì •ë²• ì œ2ì¡° (ì§€ë°©ìì¹˜ë‹¨ì²´ì˜ ì¬ì •ìš´ì˜)',
                    'ì§€ë°©ì¬ì •ë²• ì œ31ì¡° (ì˜ˆì‚°ì˜ í¸ì„±)',
                    'ë¯¼ì›ì²˜ë¦¬ì— ê´€í•œ ë²•ë¥  ì œ9ì¡° (ì²˜ë¦¬ë°©ë²•)'
                ],
                similarCases: [
                    {
                        title: 'ì‹œì„¤ ì„¤ì¹˜ ì˜ˆì‚° ìš”ì²­',
                        content: 'ì£¼ë¯¼ í¸ì˜ì‹œì„¤ ì„¤ì¹˜ ìš”ì²­ ë¯¼ì›ì— ëŒ€í•´ ì˜ˆì‚° í™•ë³´ í›„ ì„¤ì¹˜ë¥¼ ì§„í–‰í•œ ì‚¬ë¡€ì…ë‹ˆë‹¤.',
                        tags: ['ì˜ˆì‚°', 'ì‹œì„¤', 'ì„¤ì¹˜']
                    },
                    {
                        title: 'ë„ë¡œ ê°œì„  ì˜ˆì‚°',
                        content: 'ë„ë¡œ ê°œì„  ì‚¬ì—… ì˜ˆì‚° ìš”ì²­ ë¯¼ì›ì„ ì²˜ë¦¬í•œ ì‚¬ë¡€ì…ë‹ˆë‹¤.',
                        tags: ['ì˜ˆì‚°', 'ë„ë¡œ', 'ê°œì„ ']
                    }
                ]
            }
        };

        // ê¸°ë³¸ ì‘ë‹µë“¤
        const defaultResponse = {
            answer: 'ë¯¼ì› ë‚´ìš©ì„ êµ¬ì²´ì ìœ¼ë¡œ ì•Œë ¤ì£¼ì‹œë©´ ë” ì •í™•í•œ ë‹µë³€ì„ ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì¼ë°˜ì ì¸ ë¯¼ì› ì²˜ë¦¬ ì ˆì°¨:\n1. ë¯¼ì› ë‚´ìš© ê²€í†  ë° ë¶„ë¥˜\n2. ê´€ë ¨ ë¶€ì„œ í˜‘ì˜\n3. ì²˜ë¦¬ ë°©ì•ˆ ìˆ˜ë¦½\n4. ë¯¼ì›ì¸ ë‹µë³€\n5. ì²˜ë¦¬ ì™„ë£Œ ë° ê¸°ë¡',
            legalBasis: [
                'ë¯¼ì›ì²˜ë¦¬ì— ê´€í•œ ë²•ë¥  ì œ1ì¡° (ëª©ì )',
                'ë¯¼ì›ì²˜ë¦¬ì— ê´€í•œ ë²•ë¥  ì œ8ì¡° (ì²˜ë¦¬ê¸°ê°„)',
                'ë¯¼ì›ì²˜ë¦¬ì— ê´€í•œ ë²•ë¥  ì œ9ì¡° (ì²˜ë¦¬ë°©ë²•)'
            ],
            similarCases: [
                {
                    title: 'ì¼ë°˜ ë¯¼ì› ì²˜ë¦¬',
                    content: 'ì¼ë°˜ì ì¸ ë¯¼ì› ì²˜ë¦¬ ì‚¬ë¡€ì…ë‹ˆë‹¤. ë¯¼ì›ì˜ ì„±ê²©ì— ë”°ë¼ ì ì ˆí•œ ì²˜ë¦¬ ì ˆì°¨ë¥¼ ë”°ë¦…ë‹ˆë‹¤.',
                    tags: ['ì¼ë°˜', 'ë¯¼ì›', 'ì²˜ë¦¬']
                }
            ]
        };

        class ChatbotService {
            async processMessage(userMessage) {
                // í‚¤ì›Œë“œ ë§¤ì¹­ì„ í†µí•œ ì‘ë‹µ
                const matchedKey = Object.keys(mockResponses).find(key => 
                    userMessage.includes(key)
                );
                
                if (matchedKey) {
                    return mockResponses[matchedKey];
                }

                return defaultResponse;
            }
        }

        // DOM ìš”ì†Œë“¤
        const messagesContainer = document.getElementById('messages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const generateButton = document.getElementById('generateButton');
        const chatSection = document.getElementById('chatSection');
        const resultSection = document.getElementById('resultSection');
        const answerText = document.getElementById('answerText');
        const legalBasis = document.getElementById('legalBasis');
        const similarCases = document.getElementById('similarCases');
        const chatbotService = new ChatbotService();

        let currentComplaint = '';
        let currentResponse = null;

        // ì´ˆê¸° ë©”ì‹œì§€ ì¶”ê°€
        function addInitialMessage() {
            const initialMessage = {
                id: '1',
                text: 'ì•ˆë…•í•˜ì„¸ìš”! ë‚´ë¶€ ì§ì›ìš© ë¯¼ì›ì²˜ë¦¬ ì±—ë´‡ì…ë‹ˆë‹¤. ë¯¼ì› ë‚´ìš©ì„ ì…ë ¥í•˜ì‹œë©´ ì²˜ë¦¬ ë°©ë²•ì„ ì•ˆë‚´í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.',
                sender: 'bot',
                timestamp: new Date()
            };
            addMessage(initialMessage);
        }

        // ë©”ì‹œì§€ ì¶”ê°€ í•¨ìˆ˜
        function addMessage(message) {
            const messageElement = document.createElement('div');
            messageElement.className = `message ${message.sender === 'user' ? 'user-message' : 'bot-message'}`;
            
            const timeString = message.timestamp.toLocaleTimeString('ko-KR', {
                hour: '2-digit',
                minute: '2-digit'
            });

            messageElement.innerHTML = `
                <div class="message-content">
                    <div class="message-text">${message.text.replace(/\n/g, '<br>')}</div>
                    <div class="message-time">${timeString}</div>
                </div>
            `;
            
            messagesContainer.appendChild(messageElement);
            scrollToBottom();
        }

        // íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„° ì¶”ê°€
        function addTypingIndicator() {
            const typingElement = document.createElement('div');
            typingElement.className = 'message bot-message';
            typingElement.id = 'typing-indicator';
            typingElement.innerHTML = `
                <div class="message-content">
                    <div class="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingElement);
            scrollToBottom();
        }

        // íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„° ì œê±°
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // ìŠ¤í¬ë¡¤ì„ ë§¨ ì•„ë˜ë¡œ
        function scrollToBottom() {
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // ë©”ì‹œì§€ ì „ì†¡ í•¨ìˆ˜
        async function sendMessage() {
            const text = messageInput.value.trim();
            if (!text) return;

            // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
            const userMessage = {
                id: Date.now().toString(),
                text: text,
                sender: 'user',
                timestamp: new Date()
            };
            addMessage(userMessage);

            // ë¯¼ì› ë‚´ìš© ì €ì¥
            currentComplaint = text;

            // ì…ë ¥ì°½ ì´ˆê¸°í™”
            messageInput.value = '';
            messageInput.style.height = 'auto';

            // íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„° ì¶”ê°€
            addTypingIndicator();

            // ì±—ë´‡ ì‘ë‹µ ì²˜ë¦¬
            try {
                const response = await chatbotService.processMessage(text);
                currentResponse = response;
                
                // íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„° ì œê±°
                removeTypingIndicator();

                // ë´‡ ë©”ì‹œì§€ ì¶”ê°€
                const botMessage = {
                    id: (Date.now() + 1).toString(),
                    text: 'ë¯¼ì› ë‚´ìš©ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. "ëŒ€ë‹µ ìƒì„± ì™„ë£Œ" ë²„íŠ¼ì„ ëˆŒëŸ¬ êµ¬ì²´ì ì¸ ë‹µë³€ê³¼ ìœ ì‚¬ ì‚¬ë¡€ë¥¼ í™•ì¸í•˜ì„¸ìš”.',
                    sender: 'bot',
                    timestamp: new Date()
                };
                addMessage(botMessage);
            } catch (error) {
                console.error('ë©”ì‹œì§€ ì²˜ë¦¬ ì˜¤ë¥˜:', error);
                removeTypingIndicator();
                
                const errorMessage = {
                    id: (Date.now() + 1).toString(),
                    text: 'ì£„ì†¡í•©ë‹ˆë‹¤. ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
                    sender: 'bot',
                    timestamp: new Date()
                };
                addMessage(errorMessage);
            }
        }

        // ëŒ€ë‹µ ìƒì„± ì™„ë£Œ í•¨ìˆ˜
        function generateAnswer() {
            if (!currentComplaint || !currentResponse) {
                alert('ë¨¼ì € ë¯¼ì› ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ë‹µë³€ í‘œì‹œ
            answerText.textContent = currentResponse.answer;

            // ë²•ë ¹ ê·¼ê±° í‘œì‹œ
            legalBasis.innerHTML = currentResponse.legalBasis.map(basis => 
                `<li>${basis}</li>`
            ).join('');

            // ìœ ì‚¬ ì‚¬ë¡€ í‘œì‹œ
            similarCases.innerHTML = currentResponse.similarCases.map(caseItem => `
                <div class="similar-case">
                    <div class="case-title">${caseItem.title}</div>
                    <div class="case-content">${caseItem.content}</div>
                    <div class="case-tags">
                        ${caseItem.tags.map(tag => `<span class="case-tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `).join('');

            // ê²°ê³¼ ì„¹ì…˜ í‘œì‹œ
            resultSection.classList.remove('hidden');
        }

        // ë‹µë³€ ë³µì‚¬ í•¨ìˆ˜
        function copyAnswer() {
            const textToCopy = answerText.textContent;
            navigator.clipboard.writeText(textToCopy).then(() => {
                alert('ë‹µë³€ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }).catch(err => {
                console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
                alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            });
        }

        // ë‹µë³€ ìˆ˜ì • í•¨ìˆ˜
        function editAnswer() {
            const newAnswer = prompt('ë‹µë³€ì„ ìˆ˜ì •í•´ì£¼ì„¸ìš”:', answerText.textContent);
            if (newAnswer !== null) {
                answerText.textContent = newAnswer;
            }
        }

        // ë¹ ë¥¸ ë©”ì‹œì§€ ì„¤ì •
        function setQuickMessage(text) {
            messageInput.value = text;
            messageInput.focus();
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤
        sendButton.addEventListener('click', sendMessage);
        generateButton.addEventListener('click', generateAnswer);

        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // í…ìŠ¤íŠ¸ ì˜ì—­ ìë™ ë†’ì´ ì¡°ì •
        messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // ì´ˆê¸° ë©”ì‹œì§€ ì¶”ê°€
        addInitialMessage();
    </script>
</body>
</html>
